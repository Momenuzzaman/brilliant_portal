{"version":3,"sources":["helpers/post.js","views/SMS/Configuration/Menu/RoleMenu.jsx"],"names":["AuthStr","localStorage","getItem","url","body","axios","post","rootUrl","headers","res","response","status","history","push","connect","state","roleList","roleDataReducer","roles","props","myForm","createRef","useState","modalOpen","setModalOpen","rolelabel","setRoleLabel","roleValue","setRoleValue","menus","setMenus","checked","setChecked","addToast","useToasts","useHistory","permissions","JSON","parse","roleName","map","role","label","name","value","id","className","onClick","onSubmit","event","preventDefault","ref","row","sm","md","lg","options","onChange","opt","get","then","action","defaultChecked","length","i","menu","isChecked","toString","selectRole","e","newChecked","val","target","menuId","document","getElementById","handleSelectAll","type","htmlFor","xs","key","index","indexOf","splice","handleCheck","menuItem","style","display","justifyContent","includes","permissionList","Asign_Menu","Ripple","isOpen","toggle","color","subData","FormData","append","console","log","data","message","appearance","autoDismiss"],"mappings":"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","file":"static/js/253.d8602c08.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nimport history from \"./history\";\r\nimport { rootUrl } from \"../constants/constants\";\r\n\r\nconst AuthStr = localStorage.getItem(\"token\");\r\n\r\nasync function post(url, body = {}, authToken = \"\") {\r\n  try {\r\n    const res = await axios.post(`${rootUrl}${url}`, body, {\r\n      headers: {\r\n        'authorization': AuthStr,\r\n      },\r\n    });\r\n    return await res;\r\n  } catch (error) {\r\n    if (error?.response?.status === 404) {\r\n      history.push(\"/404\");\r\n    }\r\n\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport default post;\r\n","import React, { createRef, useState } from 'react'\r\nimport { connect  } from 'react-redux'\r\nimport { useHistory } from 'react-router';\r\nimport Select from 'react-select';\r\nimport { useToasts } from \"react-toast-notifications\";\r\nimport { Button, Modal,  ModalBody,  Form, FormGroup,    Col, Row, Card, CardHeader,  CardBody,  } from 'reactstrap';\r\nimport get from '../../../../helpers/get';\r\nimport post from '../../../../helpers/post';\r\nimport { permissionList } from '../../../../constants/AuthorizationConstant';\r\n\r\n\r\nconst RoleMenu = (props) => {\r\n\r\n    const myForm = createRef();\r\n    const roles = props.roleList[0];\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [rolelabel, setRoleLabel] = useState('Select Role...');\r\n    const [roleValue, setRoleValue] = useState('');\r\n    const [menus, setMenus] = useState([]);\r\n    const [confirm, setConfirm] = useState(false);\r\n    let [checked, setChecked] = useState([]);\r\n    const { addToast } = useToasts();\r\n    const history = useHistory();\r\n    const permissions = JSON.parse(localStorage.getItem('permissions'));\r\n\r\n\r\n  // submitting form\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault(); \r\n    setModalOpen(true);\r\n    // //  watch form data values\r\n    // for (var value of subData.values()) {\r\n  \r\n    //  }\r\n  \r\n    \r\n  }\r\n\r\n\r\n\r\n\r\n    // on Select Role\r\n    const selectRole = (label,value) => {\r\n\r\n        setMenus([]);\r\n        checked = [];\r\n        setRoleLabel(label);\r\n        setRoleValue(value);\r\n\r\n\r\n        const returnValue = get(`RoleMenuItem/GetCheckBoxes/${value}`).then((action)=> {\r\n       \r\n            setMenus(action);\r\n        \r\n\r\n            let defaultChecked = checked\r\n                if(action.length > 0){\r\n                    for (let i = 0; i < action.length; i++) {\r\n                    const menu = action[i];\r\n                    if(menu.isChecked == true){\r\n                        const id = menu.id.toString();\r\n                        defaultChecked.push(id)\r\n                        setChecked([...defaultChecked])\r\n                    }\r\n\r\n                    }\r\n                 }\r\n        })\r\n    }\r\n\r\n\r\n    // handling checkbox\r\n    const handleCheck = (e) => {\r\n        let id = e.target.id;\r\n        let val = e.target.checked;\r\n\r\n\r\n        if(val == true){\r\n        setChecked([...checked, id]);\r\n        }else{\r\n        const index = checked.indexOf(id);\r\n        if (index > -1) {\r\n            checked.splice(index, 1);\r\n        }\r\n        }\r\n  }\r\n\r\n\r\n  // on Select All Checkbox\r\n  const handleSelectAll = e => {\r\n    let newChecked = [];\r\n    const val = e.target.checked;\r\n    if(val == true){\r\n      menus.map(menu => {\r\n        const menuId = menu.id.toString();\r\n        newChecked.push(menuId);\r\n        document.getElementById(menu.id).checked = true;  \r\n      })\r\n      setChecked([...newChecked]);\r\n    }\r\n\r\n    if(val == false){\r\n      {\r\n        menus.map(menu => {\r\n          document.getElementById(menu.id).checked = false;  \r\n        })\r\n        setChecked([]);\r\n      }\r\n    }\r\n   \r\n  }\r\n\r\n\r\n  const handleConfirm = () => {\r\n \r\n    setMenus([]);\r\n      const subData = new FormData();\r\n      subData.append('RoleId',  roleValue);\r\n      subData.append('CheckedArr',checked);\r\n      // posting form Data\r\n      post(`RoleMenuItem/Assign`,subData).then((action)=> {\r\n        console.log('checking role menu action',action)\r\n   \r\n        setChecked([]);\r\n            addToast(action?.data?.message, {\r\n              appearance: 'success',\r\n              autoDismiss: true,\r\n            })\r\n            setModalOpen(false)\r\n      }) \r\n  }\r\n    \r\n\r\n\r\n     // redirect to dashboard\r\n    const backToDashboard = () => {\r\n        history.push(\"/\")\r\n    }\r\n    \r\n\r\n\r\n\r\n    const roleName = roles?.map(role => ({label: role.name, value: role.id}));\r\n    return (\r\n        <div>\r\n            <Card className='uapp-card-bg'>\r\n                <CardHeader className=\"page-header\">\r\n                \r\n                    <h3 className='text-light'>Assign Menu</h3>\r\n                    <div className=\"page-header-back-to-home\">\r\n                    <span onClick={backToDashboard} className='text-light'> <i className=\"fas fa-arrow-circle-left\"></i> Back to Dashboard</span>\r\n                    </div>\r\n                \r\n                </CardHeader>\r\n            </Card>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                <div className=\"container test-score-div-1-style mt-1 mb-4\">\r\n            <span className=\"test-score-span-1-style\">\r\n              Assign or Revoke Menu for User Types.\r\n            </span>\r\n          </div>\r\n                </CardHeader>\r\n\r\n                <CardBody>\r\n\r\n                <Form onSubmit={handleSubmit} ref={myForm}>\r\n\r\n                    <FormGroup row>\r\n                            <Col sm=\"6\" md=\"4\" lg=\"3\">\r\n                                <Select\r\n                                    options={roleName}\r\n                                    value={{label: rolelabel, value: roleValue }}\r\n                                    onChange={opt => selectRole(opt.label, opt.value)}\r\n                                    name=\"type\"\r\n                                    id=\"type\"\r\n                                />\r\n                                </Col>\r\n                    </FormGroup>\r\n\r\n\r\n                    <FormGroup>\r\n\r\n                                <Row>\r\n                                <Col sm=\"12\">\r\n                                {\r\n                                    menus.length > 0 &&\r\n                                    <div className=\"form-check\">\r\n                                        <input className=\"form-check-input\" onChange={(e)=>handleSelectAll(e)} type=\"checkbox\" name=\"\" />\r\n                                        <label className=\"form-check-label\" htmlFor=\"\">Select All</label>\r\n                                    </div>\r\n                                }\r\n                        \r\n                                </Col>\r\n                                {\r\n                                    roleValue &&\r\n                                    menus?.map(menu =>\r\n                                    \r\n                                    <Col xs=\"6\" sm=\"4\" md=\"3\" key={menu.id}>\r\n                                    <div className=\"form-check\">\r\n                                        <input className=\"form-check-input\" type=\"checkbox\" onChange={(e)=>handleCheck(e)} name=\"\" id={menu.id} defaultChecked={menu.isChecked}  />\r\n                                        <label className=\"form-check-label\" htmlFor=\"\">{menu.menuItem}</label>\r\n                                    </div>\r\n                                    </Col>\r\n                                    )\r\n                                }\r\n                                </Row>\r\n                        </FormGroup>\r\n                \r\n\r\n                    <FormGroup style={{display: 'flex',justifyContent: 'space-between'}}>\r\n                            <Row>\r\n\r\n                                <Col>\r\n                                {\r\n                                    permissions?.includes(permissionList?.Asign_Menu) ? \r\n                                    <Button.Ripple\r\n                                type=\"submit\"\r\n                                className=\"mr-1 mt-3 badge-primary\"\r\n                            >\r\n                                Submit\r\n                            </Button.Ripple>\r\n                            :\r\n                            null\r\n                                }\r\n                                </Col>\r\n\r\n                            </Row>\r\n                        </FormGroup>\r\n\r\n\r\n                    </Form>\r\n                    <Modal isOpen={modalOpen} toggle={()=>setModalOpen(!modalOpen)} className=\"uapp-modal\">\r\n                        <ModalBody>\r\n                            <p>Are You Sure to Assign Selected Menus?</p>\r\n                            <Row className=\"mt-3\">\r\n                            <Col md=\"6\" className=\"text-left\">\r\n                            <Button color=\"success\" onClick={handleConfirm}>Yes</Button>\r\n                            </Col>\r\n                            <Col md=\"6\" className=\"text-right\">\r\n                            <Button color=\"danger\" onClick={()=> setModalOpen(false)}>Cancel</Button>\r\n                            </Col>\r\n                            </Row>\r\n                        </ModalBody>\r\n                    </Modal>\r\n                </CardBody>\r\n\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = state => ({\r\n    roleList: state.roleDataReducer.roles\r\n})\r\nexport default connect(mapStateToProps)(RoleMenu);\r\n"],"sourceRoot":""}